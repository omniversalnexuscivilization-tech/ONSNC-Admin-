<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UH-MDARC Dashboard — Universal Holistic Multi-Dimensional Assessment Report Card</title>
  
  <!-- Optimized Resource Loading -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="uhmdarc-styles.css">
  
  <!-- Deferred Script Loading for Better Performance -->
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <script defer src="uhmdarc-script.js"></script>
</head>
<body>
  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner">
      <div class="spinner-ring"></div>
      <div class="spinner-text">Loading UH-MDARC...</div>
    </div>
  </div>

  <div class="wrap">
    <!-- Enhanced Header with Animation -->
    <header class="top">
      <div class="header-content">
        <div class="logo-section">
          <i class="fas fa-chart-network logo-icon"></i>
          <div>
            <h1>UH-MDARC Dashboard</h1>
            <p class="muted">Universal Holistic Multi-Dimensional Assessment Report Card</p>
          </div>
        </div>
        <div class="header-stats">
          <div class="stat-badge">
            <i class="fas fa-save"></i>
            <span id="autoSaveStatus">Auto-saved</span>
          </div>
        </div>
      </div>
      <div class="top-actions">
        <button id="btnPreview" class="btn primary">
          <i class="fas fa-eye"></i> 
          <span>Preview</span>
        </button>
        <button id="btnDownload" class="btn secondary">
          <i class="fas fa-download"></i> 
          <span>Download PDF</span>
        </button>
        <button id="btnShare" class="btn tertiary">
          <i class="fas fa-share-nodes"></i>
          <span>Share</span>
        </button>
      </div>
    </header>

    <main class="content">
      <!-- Form Panel with Enhanced Sections -->
      <section class="panel form-panel">
        <div class="panel-header">
          <h2><i class="fas fa-user-graduate"></i> Learner & Report Information</h2>
          <div class="progress-indicator">
            <span class="progress-text">Completion: <strong id="completionPercentage">0%</strong></span>
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
          </div>
        </div>

        <!-- Photo Upload Section -->
        <div class="profile-section">
          <div class="photo-upload-container">
            <div class="photo-upload" id="photoUpload">
              <div class="photo-overlay">
                <i class="fas fa-camera"></i>
                <span>Upload Photo</span>
              </div>
              <input type="file" id="photoInput" accept="image/*" style="display: none;">
              <img id="photoPreview" class="photo-preview" alt="Learner Photo">
            </div>
            <button class="btn-icon" id="removePhoto" style="display: none;">
              <i class="fas fa-trash"></i>
            </button>
          </div>
          
          <div class="profile-info">
            <div class="form-grid two">
              <div class="form-group">
                <label><i class="fas fa-user"></i> Learner Name *</label>
                <input id="learnerName" type="text" placeholder="Enter full name" required />
              </div>
              <div class="form-group">
                <label><i class="fas fa-fingerprint"></i> ULP Token ID *</label>
                <input id="ulpToken" type="text" placeholder="ULP-0x..." required />
              </div>
            </div>

            <div class="form-grid two">
              <div class="form-group">
                <label><i class="fas fa-building"></i> Community / Hub</label>
                <input id="hub" type="text" placeholder="Hub name" />
              </div>
              <div class="form-group">
                <label><i class="fas fa-id-card"></i> Learner ID</label>
                <input id="learnerId" type="text" placeholder="U-..." />
              </div>
            </div>
          </div>
        </div>

        <!-- Report Details -->
        <div class="section-divider">
          <span>Report Details</span>
        </div>

        <div class="form-grid two">
          <div class="form-group">
            <label><i class="fas fa-calendar"></i> Date of Report</label>
            <input id="reportDate" type="date" />
          </div>
          <div class="form-group">
            <label><i class="fas fa-clock"></i> Reporting Period</label>
            <input id="reportPeriod" type="text" placeholder="e.g., 2025-07 — 2025-10" />
          </div>
        </div>

        <div class="form-grid two">
          <div class="form-group">
            <label><i class="fas fa-chalkboard-teacher"></i> Mentor / Evaluator</label>
            <input id="mentor" type="text" placeholder="Mentor name" />
          </div>
          <div class="form-group">
            <label><i class="fas fa-signature"></i> Digital Signature</label>
            <input id="signature" type="text" placeholder="Signer name / token" />
          </div>
        </div>

        <!-- QR Code Section -->
        <div class="qr-section">
          <div class="qr-container">
            <label><i class="fas fa-qrcode"></i> ULP QR Code</label>
            <div class="qr-code" id="qrCode">
              <span class="qr-placeholder">Generate QR</span>
            </div>
          </div>
          <div class="qr-info">
            <div class="info-card">
              <i class="fas fa-shield-alt"></i>
              <p>The QR code encodes the ULP Token ID for instant verification and authenticity checking of this assessment report.</p>
            </div>
          </div>
        </div>

        <!-- ULCI Section -->
        <div class="ulci-section">
          <div class="section-header">
            <h3><i class="fas fa-globe-americas"></i> Universal Life Contribution Index (ULCI)</h3>
            <div class="tooltip-icon" data-tooltip="ULCI measures holistic contribution to global sustainability and human development">
              <i class="fas fa-info-circle"></i>
            </div>
          </div>
          
          <div class="ulci-dashboard">
            <div class="ulci-badge">
              <div class="badge-icon">
                <i class="fas fa-fingerprint"></i>
              </div>
              <div class="badge-content">
                <div class="label">Index ID</div>
                <div class="value" id="ulciIdDisplay">ULCI-2025-001</div>
              </div>
            </div>
            
            <div class="ulci-badge ulci-score">
              <div class="badge-icon">
                <i class="fas fa-chart-line"></i>
              </div>
              <div class="badge-content">
                <div class="label">ULCI Score</div>
                <div class="value" id="ulciScoreDisplay">0</div>
              </div>
              <div class="score-bar">
                <div class="score-fill" id="ulciScoreFill"></div>
              </div>
            </div>
          </div>
          
          <div class="form-grid two">
            <div class="form-group">
              <label>ULCI Index Name</label>
              <input id="ulciName" type="text" placeholder="e.g., Global Sustainability" />
            </div>
            <div class="form-group">
              <label>ULCI Score (0-100)</label>
              <input id="ulciScore" type="number" min="0" max="100" />
            </div>
          </div>
        </div>

        <!-- Multi-Dimensional Summary -->
        <div class="section-divider">
          <span>Multi-Dimensional Assessment</span>
        </div>

        <h3><i class="fas fa-layer-group"></i> Multi-Dimensional Summary (0–100)</h3>
        <div class="dimension-grid">
          <div class="dimension-card">
            <div class="dimension-icon lmi">
              <i class="fas fa-graduation-cap"></i>
            </div>
            <label>LMI (Learning Mastery)</label>
            <input id="lmi" type="number" min="0" max="100" placeholder="0-100" />
          </div>
          
          <div class="dimension-card">
            <div class="dimension-icon eci">
              <i class="fas fa-heart"></i>
            </div>
            <label>ECI (Emotional Connection)</label>
            <input id="eci" type="number" min="0" max="100" placeholder="0-100" />
          </div>
          
          <div class="dimension-card">
            <div class="dimension-icon ci">
              <i class="fas fa-users"></i>
            </div>
            <label>CI (Collaborative Intelligence)</label>
            <input id="ci" type="number" min="0" max="100" placeholder="0-100" />
          </div>
          
          <div class="dimension-card">
            <div class="dimension-icon ras">
              <i class="fas fa-shield-alt"></i>
            </div>
            <label>RAS (Resilience & Adaptability)</label>
            <input id="ras" type="number" min="0" max="100" placeholder="0-100" />
          </div>
        </div>

        <!-- Competency Matrix -->
        <div class="section-divider">
          <span>Competency Matrix (IPR Framework)</span>
        </div>

        <h3><i class="fas fa-table"></i> Detailed Competency Assessment</h3>
        <div class="table-container">
          <table id="competencyTable" class="data-table">
            <thead>
              <tr>
                <th>Dimension</th>
                <th>Competency</th>
                <th>Indicators</th>
                <th>Score (1-4)</th>
                <th>Evidence</th>
                <th>Next Step</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <button id="addCompetency" class="btn-add">
            <i class="fas fa-plus-circle"></i> Add Competency
          </button>
        </div>

        <!-- Narrative & Reflection -->
        <div class="section-divider">
          <span>Narrative & Reflections</span>
        </div>

        <h3><i class="fas fa-comment-dots"></i> Holistic Feedback</h3>
        <div class="narrative-section">
          <div class="form-group">
            <label><i class="fas fa-user-edit"></i> Learner Reflection</label>
            <textarea id="learnerReflection" rows="4" placeholder="Share your learning journey, challenges overcome, and personal growth insights..."></textarea>
            <div class="char-counter">
              <span id="learnerReflectionCount">0</span> / 1000 characters
            </div>
          </div>
          
          <div class="form-group">
            <label><i class="fas fa-chalkboard-teacher"></i> Mentor Feedback</label>
            <textarea id="mentorReflection" rows="4" placeholder="Provide observations, guidance, and developmental recommendations..."></textarea>
            <div class="char-counter">
              <span id="mentorReflectionCount">0</span> / 1000 characters
            </div>
          </div>
          
          <div class="form-group">
            <label><i class="fas fa-users"></i> Peer Highlights</label>
            <textarea id="peerHighlights" rows="3" placeholder="Notable contributions, collaborations, and peer recognition..."></textarea>
            <div class="char-counter">
              <span id="peerHighlightsCount">0</span> / 500 characters
            </div>
          </div>
        </div>

        <!-- Adaptive Path -->
        <div class="section-divider">
          <span>Adaptive Learning Path</span>
        </div>

        <h3><i class="fas fa-route"></i> Development Roadmap</h3>
        <div class="pathway-section">
          <div class="pathway-card short">
            <div class="pathway-icon">
              <i class="fas fa-flag"></i>
            </div>
            <div class="form-group">
              <label>Short-term (1 month)</label>
              <input id="shortTerm" type="text" placeholder="Immediate next steps and quick wins" />
            </div>
          </div>
          
          <div class="pathway-card medium">
            <div class="pathway-icon">
              <i class="fas fa-map-signs"></i>
            </div>
            <div class="form-group">
              <label>Medium-term (1–6 months)</label>
              <input id="mediumTerm" type="text" placeholder="Developmental goals and skill building" />
            </div>
          </div>
          
          <div class="pathway-card long">
            <div class="pathway-icon">
              <i class="fas fa-mountain"></i>
            </div>
            <div class="form-group">
              <label>Long-term (6+ months)</label>
              <input id="longTerm" type="text" placeholder="Aspirational objectives and transformation" />
            </div>
          </div>
        </div>

        <!-- Metaphormic Badges -->
        <div class="section-divider">
          <span>Achievement Recognition</span>
        </div>

        <div class="metaphormic-section">
          <h3><i class="fas fa-award"></i> Metaphormic Badges</h3>
          <div class="badges-display" id="badgesContainer"></div>
          <button id="addMetaphormicBadge" class="btn-add">
            <i class="fas fa-plus-circle"></i> Add Metaphormic Badge
          </button>
        </div>

        <!-- Digital Badges -->
        <h3><i class="fas fa-certificate"></i> Digital Credentials</h3>
        <div class="table-container">
          <table id="badgesTable" class="data-table compact">
            <thead>
              <tr>
                <th>Badge Name</th>
                <th>Hash/ID</th>
                <th>Date Issued</th>
                <th>Verifier</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <button id="addBadge" class="btn-add">
            <i class="fas fa-plus-circle"></i> Add Digital Badge
          </button>
        </div>

        <!-- Audit & AI Log -->
        <div class="section-divider">
          <span>System Audit Trail</span>
        </div>

        <h3><i class="fas fa-clipboard-list"></i> Activity & AI Enhancement Log</h3>
        <div class="table-container">
          <table id="auditTable" class="data-table compact">
            <thead>
              <tr>
                <th>Timestamp</th>
                <th>Event Type</th>
                <th>Details</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <button id="addAudit" class="btn-add">
            <i class="fas fa-plus-circle"></i> Add Log Entry
          </button>
        </div>

        <!-- Action Buttons -->
        <div class="form-actions">
          <button id="btnSave" class="btn success">
            <i class="fas fa-save"></i> Save Draft
          </button>
          <button id="btnClear" class="btn danger">
            <i class="fas fa-broom"></i> Clear Form
          </button>
        </div>
      </section>

      <!-- Preview Panel -->
      <aside class="panel preview-panel">
        <div class="panel-header sticky">
          <h2><i class="fas fa-file-alt"></i> Live Preview</h2>
          <button id="refreshPreview" class="btn-icon" title="Refresh Preview">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
        
        <div id="reportPreview" class="report-card">
          <!-- Report Header -->
          <div class="rc-header">
            <div class="rc-title">
              <h3>Universal Holistic Multi-Dimensional Assessment Report Card</h3>
              <div class="rc-subtitle">Growth + Development — UH-MDARC 360° System</div>
            </div>
            <div class="rc-meta">
              <div class="meta-item">
                <strong>ULP:</strong> <span id="pv-ulp">—</span>
              </div>
              <div class="meta-item">
                <strong>Date:</strong> <span id="pv-date">—</span>
              </div>
            </div>
          </div>

          <!-- Profile Section -->
          <section class="rc-section profile">
            <div class="profile-display">
              <div id="pv-photo" class="profile-photo">
                <i class="fas fa-user"></i>
              </div>
              <div class="profile-details">
                <div class="detail-row">
                  <strong>Name:</strong> <span id="pv-name">—</span>
                </div>
                <div class="detail-row">
                  <strong>Hub:</strong> <span id="pv-hub">—</span>
                </div>
                <div class="detail-row">
                  <strong>ID:</strong> <span id="pv-id">—</span>
                </div>
                <div class="detail-row">
                  <strong>Mentor:</strong> <span id="pv-mentor">—</span>
                </div>
              </div>
            </div>
          </section>

          <!-- ULCI Section -->
          <section class="rc-section ulci">
            <div class="ulci-display">
              <div class="ulci-info">
                <h4>Universal Life Contribution Index</h4>
                <div class="ulci-details">
                  <div><strong>ID:</strong> <span id="pv-ulci-id">—</span></div>
                  <div><strong>Score:</strong> <span id="pv-ulci-score" class="score-highlight">—</span></div>
                  <div><strong>Category:</strong> <span id="pv-ulci-name">—</span></div>
                </div>
              </div>
              <div id="pv-qr" class="qr-display">
                <span class="qr-placeholder">QR Code</span>
              </div>
            </div>
          </section>

          <!-- Multi-Dimensional Summary -->
          <section class="rc-section dimensions">
            <h4>Multi-Dimensional Assessment</h4>
            <div class="dimensions-grid">
              <div class="dim-score">
                <small>LMI</small>
                <div class="score-value" id="pv-lmi">—</div>
              </div>
              <div class="dim-score">
                <small>ECI</small>
                <div class="score-value" id="pv-eci">—</div>
              </div>
              <div class="dim-score">
                <small>CI</small>
                <div class="score-value" id="pv-ci">—</div>
              </div>
              <div class="dim-score">
                <small>RAS</small>
                <div class="score-value" id="pv-ras">—</div>
              </div>
            </div>
            
            <div class="charts-container">
              <div class="chart-wrapper">
                <canvas id="pvRadar"></canvas>
              </div>
              <div class="chart-wrapper">
                <canvas id="pvTrend"></canvas>
              </div>
            </div>
          </section>

          <!-- Competency Highlights -->
          <section class="rc-section">
            <h4>Competency Highlights</h4>
            <div id="pv-competencies" class="competency-list">—</div>
          </section>

          <!-- Narrative -->
          <section class="rc-section">
            <h4>Holistic Narrative</h4>
            <div class="narrative-block">
              <div class="narrative-item">
                <strong>Learner Reflection:</strong>
                <p id="pv-learnerReflection">—</p>
              </div>
              <div class="narrative-item">
                <strong>Mentor Feedback:</strong>
                <p id="pv-mentorReflection">—</p>
              </div>
              <div class="narrative-item">
                <strong>Peer Recognition:</strong>
                <p id="pv-peerHighlights">—</p>
              </div>
            </div>
          </section>

          <!-- Adaptive Path -->
          <section class="rc-section">
            <h4>Development Roadmap</h4>
            <div class="roadmap-list">
              <div class="roadmap-item short">
                <i class="fas fa-flag"></i>
                <div>
                  <strong>Short-term:</strong> 
                  <span id="pv-short">—</span>
                </div>
              </div>
              <div class="roadmap-item medium">
                <i class="fas fa-map-signs"></i>
                <div>
                  <strong>Medium-term:</strong> 
                  <span id="pv-medium">—</span>
                </div>
              </div>
              <div class="roadmap-item long">
                <i class="fas fa-mountain"></i>
                <div>
                  <strong>Long-term:</strong> 
                  <span id="pv-long">—</span>
                </div>
              </div>
            </div>
          </section>

          <!-- Metaphormic Badges -->
          <section class="rc-section compact">
            <h4>Metaphormic Recognition</h4>
            <div id="pv-metaphormic-badges" class="badges-preview">—</div>
          </section>

          <!-- Digital Badges -->
          <section class="rc-section compact">
            <h4>Digital Credentials</h4>
            <div id="pv-badges" class="credentials-list">—</div>
          </section>

          <!-- Audit Log -->
          <section class="rc-section compact">
            <h4>Audit Trail</h4>
            <div id="pv-audit" class="audit-list">—</div>
          </section>

          <!-- Report Footer -->
          <div class="rc-footer">
            <div class="signature-block">
              <strong>Digital Signature:</strong> <span id="pv-sign">—</span>
            </div>
            <div class="timestamp">
              Generated: <span id="pv-ts"></span>
            </div>
          </div>
          
          <div class="rc-watermark">
            UHAN — One Earth. One Species. One Ethic.
          </div>
        </div>
      </aside>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-brand">
          <i class="fas fa-globe"></i>
          <span>UHAN — One Earth. One Species. One Ethic.</span>
        </div>
        <div class="footer-info">
          <span>UH-MDARC v2.0 | 360° Assessment System</span>
        </div>
      </div>
    </footer>
  </div>

  <!-- Share Modal -->
  <div class="modal" id="shareModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-share-nodes"></i> Share Report</h3>
        <button class="modal-close" id="closeShareModal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="share-options">
          <button class="share-btn" data-share="link">
            <i class="fas fa-link"></i>
            <span>Copy Link</span>
          </button>
          <button class="share-btn" data-share="email">
            <i class="fas fa-envelope"></i>
            <span>Email</span>
          </button>
          <button class="share-btn" data-share="qr">
            <i class="fas fa-qrcode"></i>
            <span>Show QR</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>